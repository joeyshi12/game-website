const unitLength = 32;

class Tilemap {
    constructor(data, rows, columns, camera) {
        this.data = data;
        this.rows = rows;
        this.columns = columns;
        this.camera = camera;
    }

    draw() {
        for (let i = 0; i < this.rows; i++) {
            for (let j = 0; j < this.columns; j++) {
                const x = j * unitLength;
                const y = i * unitLength;
                const sx = (this.data[i*this.columns + j] % 48) * 16;
                const sy = Math.floor(this.data[i*this.columns + j] / 48) * 16;
                image(spriteSheet, x - this.camera.x, y - this.camera.y, unitLength, unitLength, sx, sy, 15.5, 16);
            }
        }
    }
}

const a = 21 + 6 * 48;
const b = 22 + 6 * 48;
const c = 23 + 6 * 48;
const d = 19 + 4 * 48;
const e = 18 + 4 * 48;
const I = 10 + 48 * 3;
const s = 21 + 5 * 48;
const f1 = 17 + 9 * 48;
const f2 = 17 + 8 * 48;
const lc = 66 + 48;
const rc = 68 + 48;
const mc = 67 + 48;
const h1 = 5 + 12 * 48;
const h2 = 6 + 12 * 48;
const h3 = 7 + 12 * 48;
const h4 = 5 + 13 * 48;
const h5 = 9 * 48;
const h6 = 7 + 13 * 48;

const solids = new Set();
solids.add(18);
solids.add(19);
solids.add(20);
solids.add(66);
solids.add(68)
solids.add(e);
solids.add(d);
solids.add(lc);
solids.add(rc);
solids.add(mc);

const platforms = new Set();
platforms.add(a);
platforms.add(b);
platforms.add(c);

const m = 20;
const n = 40;
const cells1 = [
    68, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 ,
    68, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 ,
    68, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 ,
    68, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 ,
    68, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 ,
    68, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , h1, h2, h3, 0 , I , 0 , 0 ,
    68, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , h4, h5, h6, 0 , I , 0 , 0 ,
    68, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 18, 19, 19, 19, 19, 19, 19, 19, 19,
    68, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 66, 0 , 0 , 0 , 0 , 67, 0 , 0 , 0 ,
    68, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 66, 0 , 0 , 0 , 0 , 0 , 0 , 67, 0 ,
    68, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 18, 19, 19, 19, 20, 0 , 0 , 0 , 0 , 66, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 ,
    68, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 66, 0 , 0 , 0 , 68, 0 , 0 , 0 , 0 , 66, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 ,
    68, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , a , b , c , 0 , 0 , 0 , 0 , I , a , b , c , 0 , 66, 67, 0 , 0 , 68, 0 , 0 , 0 , 0 , 66, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 ,
    68, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 66, 0 , 0 , 0 , 68, 22, 22, 22, 22, 66, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 ,
    68, 0 , 0 , 0 , 0 , 0 , a , b , c , I , 0 , 0 , 0 , 0 , a , b , c , I , 0 , 0 , 0 , 0 , 66, 0 , 0 , 0 , e , 19, 19, 19, 19, d , 0 , 67, 0 , 0 , 0 , 0 , 0 , 0 ,
    68, 0 , 0 , f1, 0 , 0 , 0 , 0 , 0 , I , 0 , 0 , 50, 50, 49, 0 , 0 , I , 0 , 0 , 0 , 0 , 66, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 ,
    68, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, d , 0 , 0 , 0 , 0 , 0 , 0 , 67, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 ,
    68, 0 , 0 , 0 , 0 , 0 , 0, 0 , 0 , 0 , 0 , 67, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 67, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 ,
    68, 0 , 0 , 0 , 0 , 0 , d , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 67, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 ,
    68, 0 , 0 , 0 , 67, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0
];

const cells2 = [
    0 , 0 , 0 , 0 , 0 , 66, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 68, 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 66,
    0 , 0 , 0 , 0 , 0 , 66, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 68, 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 66,
    0 , 0 , 0 , 0 , 0 , 66, 67, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 68, 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 66,
    0 , 0 , 0 , 0 , 0 , 66, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 67, 0 , 68, 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , 0 , 0 , 66,
    0 , 0 , 0 , 0 , 0 , 66, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 67, 0 , 0 , 0 , 0 , 0 , 68, 0 , 0 , 0 , 0 , I , 0 , 0 , 0 , 0 , f2, 0 , 66,
    0 , 0 , 0 , 0 , 0 , 66, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , mc, mc, mc, mc, mc, mc, mc, mc, mc, mc, mc, mc, rc, 0 , 0 , 0 , 0 , I , 0 , 18, 19, 19, 19, 19, d ,
    0 , 0 , 0 , 0 , 0 , 66, 0 , 67, 0 , 0 , 0 , 0 , 0 , 0 , 68, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 66, 0 , 0 , 0 , 0 , 0 ,
    19, 20, a , b , c , lc, mc ,mc, mc, mc, mc, mc, mc, mc, rc, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , I , 0 , 66, 0 , 0 , 67, 0 , 0 ,
    0 , 68, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 18, 19, 19, 19, 19, 19, 19, 19, d , 0 , 0 , 0 , 0 , 0 ,
    0 , 68, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , a , b , c , 0 , 0 , 0 , 66, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 67, 0 , 0 , 0 , 0 , 0 ,
    67, 68, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 66, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 ,
    0 , 68, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , a , b , c , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 66, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 ,
    0 , 68, 0 , 0 , 0 , 0 , 0 , 0 , a , b , c , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 66, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 ,
    0 , 68, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 66, 0  ,0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 ,
    0 , 68, a , b , c , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 66, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 ,
    0 , 68, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 66, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 ,
    0 , e , 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, d , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 ,
    0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 67, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 67, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 ,
    67, 0 , 0 , 0 , 0 , 0 , 0 , 67, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 67, 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 ,
    0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0 , 0
];